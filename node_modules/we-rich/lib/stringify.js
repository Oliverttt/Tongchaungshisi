'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.formatAttributes = formatAttributes;
exports.toHTML = toHTML;

var _compat = require('./compat');

function formatAttributes(attrs) {
  var attrsArray = [];
  for (var k in attrs) {
    attrsArray.push({ key: k, value: attrs[k] });
  }
  return attrsArray.reduce(function (attrs, attribute) {
    var key = attribute.key,
        value = attribute.value;

    if (value === null) {
      return attrs + ' ' + key;
    }
    var quoteEscape = value.indexOf("'") !== -1;
    var quote = quoteEscape ? '"' : "'";
    return attrs + ' ' + key + '=' + quote + value + quote;
  }, '');
}

function toHTML(tree, options) {
  return tree.map(function (node) {
    if (node.type === 'text') {
      return node.text;
    }
    if (node.type === 'comment') {
      return '<!--' + node.text + '-->';
    }
    var name = node.name,
        attrs = node.attrs,
        children = node.children;

    var isSelfClosing = (0, _compat.arrayIncludes)(options.voidTags, name.toLowerCase());
    return isSelfClosing ? '<' + name + formatAttributes(attrs) + '>' : '<' + name + formatAttributes(attrs) + '>' + toHTML(children, options) + '</' + name + '>';
  }).join('');
}

exports.default = { toHTML: toHTML };
//# sourceMappingURL=stringify.js.map
